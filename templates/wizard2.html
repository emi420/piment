
<div class="row">
  <div class="col-sm-2">  
  </div>
  <div class="col-sm-8 text-center"> 
    <h2>Grabar</h2>

      <button ng-click="showOrHideStatus()" class="btn btn-xs btn-default btn-lg">
        &nbsp; Debug &nbsp;
      </button>
      <div ng-show="showStatus">
        <br />
        <textarea ng-model="status" rows="10" class="form-control debug-textarea"></textarea>
      </div>
      <hr />

      <div ng-show="(step=='error')">
       <p><strong>Oops! ha ocurrido un error</strong>, por favor intenta nuevamente</p>

        <br />
        <textarea ng-model="status" rows="10" class="form-control debug-textarea"></textarea>
        <br />

        <button ng-click="errorOk()" class="btn btn-lg btn-default btn-lg">
          &nbsp; Reintentar &nbsp;
        </button>
        <hr />
      </div>

      <div ng-show="(step==0)">
       <p>Esta utilidad te permite grabar nuevos controles remotos de forma <strong>RAW</strong>.</p>
       <p>Ciertos tipos de control remoto más avanzados, como los de aire acondicionado, envían la configuración completa al apretar un botón del control. Para esos controles está diseñada esta utilidad.</p>
       <p><strong>Importante:</strong> Debes contar con una configuración de plantilla antes de continuar. Para obtenerla basta con realizar los pasos del Asistente, no grabar ningún botón y copiar la configuración mostrada al final.</p>
        <hr />
        <button ng-disabled="loading" ng-click="step1()" class="btn btn-default btn-lg">
          &nbsp; Siguiente &nbsp;
        </button>
      </div>
  
      <div ng-show="(step==1)">

         <p>Antes de continuar, pega en el sigiente cuadro una configuración de plantilla.</p><p> Si no la tienes, para obtenerla basta con realizar los pasos del Asistente, no grabar ningún botón y copiar la configuración mostrada al final.</p>
          <hr />
          <div class="row" ng-hide="saved"> 
            <div class="col-sm-12"> 
              <textarea ng-model="configTemplate" rows="10" class="form-control"></textarea>
              <br />
              <button ng-disabled="loading" ng-click="step2()" class="btn btn-block btn-lg btn-default">
                &nbsp; Siguiente &nbsp;
              </button>
            </div>
          </div>

      </div>

      <div ng-show="(step==2)">
        <p>
          Ahora, graba cada señal.
        </p>
        <hr />

        <div class="row" ng-hide="(recordMsg || recordingMsg)">
          <div class="col-sm-8"> 
            <form class="form-horizontal">
              <select class="form-control" ng-model="selectedNamespace">
                <option ng-repeat="option in namespace" value="{{option}}">{{option}}</option>
              </select>
            </form>
          </div>
          <div class="col-sm-4"> 
            <button ng-click="recordButton()" class="btn btn-block btn-danger">
              <i class="glyphicon glyphicon-record"></i> Grabar
            </button>
          </div>
        </div>

        <div class="row" ng-show="recordMsg">
          <h3><i class="glyphicon glyphicon-ok-circle"></i> Listo!</h3>
        </div>

        <div class="row" ng-show="recordingMsg">
          <h4>Presiona <strong>una vez</strong> el botón {{ selectedNamespace }} .</h4>
        </div>

        <hr />

        <button ng-disabled="loading" ng-click="step3()" class="btn btn-lg  btn-block btn-default">
          &nbsp; Finalizar &nbsp;
        </button>

      </div>

      <div ng-show="(step==3)">

        <div ng-hide="saved">
          <p>
            Listo! ya puedes guardar la configuración del control remoto.
          </p>
          <div class="row" ng-hide="saved"> 
            <div class="col-sm-12"> 
              <textarea ng-model="config" rows="10" class="form-control"></textarea>
              <hr />
              <input type="text" ng-model="name" class="form-control input-lg" placeholder="Nombre del control" />
            </div>
          </div>
          <br />
          <div class="row">
            <div class="col-sm-6"> 
              <button ng-disabled="loading" ng-click="discard()" class="btn btn-block btn-lg btn-default">
                &nbsp; Descartar &nbsp;
              </button>
            </div>
            <div class="col-sm-6"> 
              <button ng-disabled="loading" ng-click="save()" class="btn btn-block btn-lg btn-success">
                &nbsp; Guardar &nbsp;
              </button>
            </div>
          </div>
        </div>

        <div class="row" ng-show="saved"> 
           <br />
           <h3><i class="glyphicon glyphicon-ok-circle"></i> Guardado!</h3>
           <br />
        </div>

    </div>
  <div class="col-sm-2">  
  </div>
</div>

